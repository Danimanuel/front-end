<div *ngIf="aberto" class="fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50">
  <div class=" p-6 rounded-2xl shadow-xl relative w-[400px]">
    <section class="bg-white overflow-hidden transition-all duration-500 ease-in-out transform rounded-2xl w-[20rem] h-[26rem] sm:w-80 sm:h-[26rem] md:w-96 md:h-[26rem]">
          <header class="bg-blue-900 p-5 text-center text-white font-sans">
            <p class="text-lg">Assistente Virtual Angola Cables</p>
            <button  (click)="fechar()" class="absolute top-3 right-3 bg-blue-950 text-white px-3 py-1 rounded-lg">X</button>
          </header>

          <!-- start message  -->
          <ng-container *ngIf="!conversationStarted">
            <article class="p-2 pb-1 bg-[#f4f1f1] m-5 rounded-md">
              <p>Olá! Sou o Assistente virtual da Angola Cables.</p>
            </article>
            <article class="p-4 bg-[#f4f1f1] m-5 -mt-4 rounded-lg">
              <p class="mb-2">Posso ajudar com:</p>
              <ul class="list-disc text-sm pl-6 marker:text-blue-900">
                <li>Internet & Fibra Óptica</li>
                <li>Serviços Cloud</li>
                <li>Data Centers</li>
                <li>Suporte Técnico</li>
              </ul>
            </article>
          </ng-container>

          <!----BOT Response-->

          <div
            *ngIf="conversationStarted"
            #chatContainer
            class="px-5 mt-3 space-y-2 overflow-y-auto h-[62%]"
          >
            <div *ngFor="let msg of messages">
              <p
                *ngIf="msg.from === 'user'"
                class="text-left bg-blue-900 text-white p-2 rounded-xl inline-block max-w-[75%]"
              >
                {{ msg.text }}
              </p>
              <div *ngIf="loading" class="text-left">
           <div class="bg-[#f4f1f1f1] text-black p-2 rounded-xl inline-block max-w-[75%]">
            <div class="typing-indicator">
              <span></span>
              <span></span>
              <span></span>
            </div>
           </div>
         </div>
              <p
                *ngIf="msg.from === 'bot'"
                class="text-left bg-[#f4f1f1] text-black p-2 rounded-xl inline-block max-w-[75%]"
              >
              <markdown *ngIf="msg.text" [data]="msg.text"></markdown>

              </p>
            </div>
          </div>

          <!---Formulário-->

          <form (ngSubmit)="sendMessage()" class="flex items-center gap-2 px-6 mt-2">
            <input
              type="text"
              [(ngModel)]="text"
              name="text"
              placeholder="escreva sua mensagem..."
              class="flex-1 rounded-xl border-2 p-3 border-blue-600"
            >
            <button type="submit" class="bg-blue-900 text-white px-4 py-2 rounded-xl" >
              <img src="img/send.png" alt="" class="w-[65px] invert brightness-0  md:max-w-[35px] max-h-[80%]" >
            </button>
          </form>
        </section>
  </div>
</div>


